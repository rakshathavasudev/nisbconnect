<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>NISB Connect</title>
  </head>
  <body>

    {% include 'nav.html' %}
    <div class="container" style="margin-top:100px; margin-bottom:200px;">

      <div class="row justify-content-md-center">
        <div class="col-md-8">
          <form method="post" id="postform">
            <textarea class="form-control" name="post_data" id="post_data" rows="5" cols="80" placeholder="Write something here..."></textarea>
            <br> <button type="submit" name="submit" class="btn btn-dark btn-lg btn-block">Submit</button>
          </form>
        </div>
      </div>


<div class="row justify-content-md-center">
  <div class="col-md-8">

    <br><br><br>
    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">All</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-following-tab" data-toggle="pill" href="#pills-following" role="tab" aria-controls="pills-profile" aria-selected="false">Following</a>
      </li>
      <!-- <li class="nav-item">
        <a class="nav-link" id="pills-liked-tab" data-toggle="pill" href="#pills-mliked" role="tab" aria-controls="pills-profile" aria-selected="false">Most Liked</a>
      </li> -->
    </ul>
    <div class="tab-content" id="pills-tabContent">
      <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">


        {% for post in allposts %}
          <div class="card">
            <div class="card-body">
              <h5> <a href="/post/single/{{post[0]}}" style="color:black;">@{{post[2]}}</a></h5>
              <p style="color:#444;">{{post[3][:100]}}...

              </p>

            </div>
            <div class="card-footer text-muted" style="padding:10px;">
              {% if is_liked(session["user_id"],post[0])==0 %}
                <a href="/like/{{post[0]}}" class="btn btn-primary btn-sm" ><span class="badge badge-light">{{get_likes(post[0])}}</span> Like</a>
              {% else %}
                <a href="/unlike/{{post[0]}}" class="btn btn-dark btn-sm" ><span class="badge badge-light">{{get_likes(post[0])}}</span> Unlike</a>
              {% endif %}
                <a href="/post/single/{{post[0]}}" class="btn btn-primary btn-sm">Comment</a>
                <a href="/post/single/{{post[0]}}" class="btn btn-warning btn-sm" >View Post</a>
                <small  style="color:#444;float:right;padding:.25rem .5rem;">Posted on {{post[4].strftime('%d-%m-%y')}}</small>
            </div>
          </div><br>
        {% endfor %}


      </div>
      <div class="tab-pane fade" id="pills-following" role="tabpanel" aria-labelledby="pills-following-tab">
        {% for post in fposts %}
          <div class="card">
            <div class="card-body">
              <h5> <a href="/post/single/{{post[0]}}" style="color:black;">@{{post[2]}}</a></h5>
              <p style="color:#444;">{{post[3][:100]}}...

              </p>

            </div>
            <div class="card-footer text-muted" style="padding:10px;">

              {% if is_liked(session["user_id"],post[0])==0 %}
              <a href="/like/{{post[0]}}" class="btn btn-primary btn-sm" ><span class="badge badge-light">{{get_likes(post[0])}}</span> Like</a>
              {% else %}
                <a href="/unlike/{{post[0]}}" class="btn btn-dark btn-sm" ><span class="badge badge-light">{{get_likes(post[0])}}</span> Unlike</a>
              {% endif %}
                <a href="/post/single/{{post[0]}}" class="btn btn-primary btn-sm">Comment</a>
                <a href="/post/single/{{post[0]}}" class="btn btn-warning btn-sm" >View Post</a>
                <small  style="color:#444;float:right;padding:.25rem .5rem;">Posted on {{post[4].strftime('%d-%m-%y')}}</small>
            </div>
          </div><br>
        {% endfor %}
      </div>
      <div class="tab-pane fade" id="pills-mliked" role="tabpanel" aria-labelledby="pills-liked-tab">
        {% for post in allposts %}
          <div class="card">
            <div class="card-body">
              <h5> <a href="/post/single/{{post[0]}}" style="color:black;">@{{post[2]}}</a></h5>
              <p style="color:#444;">{{post[3][:100]}}...
                <a href="/post/single/{{post[0]}}">View Post</a>
              </p>

            </div>
            <div class="card-footer text-muted" style="padding:10px;">
              {% if is_liked(session["user_id"],post[0])==0 %}
                <a href="/like/{{post[0]}}" class="btn btn-primary btn-sm" >Like</a>
              {% else %}
                <a href="/unlike/{{post[0]}}" class="btn btn-dark btn-sm" >Unlike</a>
              {% endif %}
                <a href="/post/single/{{post[0]}}" class="btn btn-primary btn-sm">Comment</a>
                <small  style="color:#444;float:right;padding:.25rem .5rem;">Posted on {{post[4].strftime('%d-%m-%y')}}</small>
            </div>
          </div><br>
        {% endfor %}
      </div>
    </div>







  </div>
</div>
    <!-- Container end -->
</div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script type="text/javascript">
    $( "#postform" ).submit(function( event ) {
      event.preventDefault();
      $.post("/addpost", {post_data: $('#post_data').val()}, function(result){
        alert(result);
      });

    });

    </script>
  </body>
</html>
